{"ast":null,"code":"import _defineProperty from \"/home/adrien/T\\xE9l\\xE9chargements/my_events-master/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/adrien/T\\xE9l\\xE9chargements/my_events-master/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/adrien/T\\xE9l\\xE9chargements/my_events-master/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/adrien/T\\xE9l\\xE9chargements/my_events-master/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/adrien/T\\xE9l\\xE9chargements/my_events-master/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/adrien/T\\xE9l\\xE9chargements/my_events-master/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/adrien/T\\xE9l\\xE9chargements/my_events-master/src/pages/Home.js\";\nimport React, { Component } from \"reactn\";\nimport Card from 'react-bootstrap/Card';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport { Link } from 'react-router-dom';\nimport axios from \"axios\";\nimport flechee from './flechee.png';\nimport './Home.css'; // import anime from \"animejs\";\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home() {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this));\n\n    _this.componentDidMount = function () {\n      window.addEventListener('scroll', _this.scrollBackTop);\n    };\n\n    _this.scrollBackTop = function () {\n      if (window.pageYOffset > 0) {\n        _this.setState({\n          scroll: true\n        });\n      } else {\n        _this.setState({\n          scroll: false\n        });\n      }\n    };\n\n    _this.scrollTop = function () {\n      document.documentElement.scrollTop = 0;\n    };\n\n    _this.pageClick = function (event) {\n      _this.setState({\n        current_page: Number(event.target.id)\n      });\n    };\n\n    _this.getCategories = function () {\n      var cats = [];\n      axios.get(_this.global.api + \"categories/?token=\" + _this.global.app_key).then(function (response) {\n        response[\"data\"][\"categories\"].forEach(function (v, k) {\n          cats.push([v[\"id\"], v[\"name\"]]);\n        });\n\n        _this.setState({\n          categories: cats\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.handleChange = function (event) {\n      if (event.target.id === \"category\") {\n        _this.setState({\n          category_id: event.target[event.target.selectedIndex].id\n        });\n      }\n\n      _this.setState(_defineProperty({}, event.target.id, event.target.value));\n    };\n\n    _this.handleSubmit = function (event) {\n      var events_list = [];\n      event.preventDefault();\n      axios.get(_this.global.api + \"events/search/?location.address=\" + _this.state.location + \"&categories=\" + _this.state.category_id + \"&token=\" + _this.global.app_key).then(function (response) {\n        response[\"data\"][\"events\"].forEach(function (v, k) {\n          if (v[\"logo\"] !== null) {\n            events_list.push([v[\"name\"][\"text\"], v[\"description\"][\"text\"], v[\"logo\"][\"url\"], v[\"id\"]]);\n          }\n        });\n\n        _this.setState({\n          events: events_list\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.showPosition = function (position) {\n      var coords = [position.coords.latitude, position.coords.longitude];\n\n      _this.getEvents(coords);\n    };\n\n    _this.getEvents = function (coords) {\n      var events_list = [];\n      axios.get(_this.global.api + \"/events/search/?location.latitude=\" + coords[0] + \"&location.longitude=\" + coords[1] + \"&token=\" + _this.global.app_key).then(function (response) {\n        response[\"data\"][\"events\"].forEach(function (v, k) {\n          if (v[\"logo\"] !== null) {\n            events_list.push([v[\"name\"][\"text\"], v[\"description\"][\"text\"], v[\"logo\"][\"url\"], v[\"id\"]]);\n          }\n        });\n\n        _this.setState({\n          events: events_list\n        });\n      }).catch(function (error) {\n        console.log(error);\n        anime({\n          targets: '.line-drawing-demo .lines path',\n          strokeDashoffset: [anime.setDashoffset, 0],\n          easing: 'easeInOutSine',\n          duration: 1800,\n          delay: function delay(el, i) {\n            return i * 350;\n          },\n          direction: 'alternate',\n          loop: true\n        });\n      });\n    };\n\n    _this.state = {\n      events: [],\n      categories: [],\n      category: \"\",\n      category_id: \"\",\n      location: \"\",\n      current_page: 1,\n      events_per_page: 8,\n      scroll: false\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.getCity();\n      this.getCategories();\n    }\n  }, {\n    key: \"getCity\",\n    value: function getCity() {\n      navigator.geolocation.getCurrentPosition(this.showPosition);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          current_page = _this$state.current_page,\n          events_per_page = _this$state.events_per_page;\n      var indexOfLastEvent = current_page * events_per_page;\n      var indexOfFirstEvent = indexOfLastEvent - events_per_page;\n      var currentEvents = this.state.events.slice(indexOfFirstEvent, indexOfLastEvent);\n      var cats = this.state.categories.map(function (cats, key) {\n        return React.createElement(\"option\", {\n          id: cats[0],\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, cats[1]);\n      });\n\n      if (this.state.events.length > 0) {\n        var events = currentEvents.map(function (event, key) {\n          return React.createElement(Card, {\n            key: key,\n            border: \"light\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 139\n            },\n            __self: this\n          }, React.createElement(Card.Body, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 140\n            },\n            __self: this\n          }, React.createElement(Card.Img, {\n            variant: \"top\",\n            src: event[2],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 141\n            },\n            __self: this\n          }), React.createElement(Card.Title, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 142\n            },\n            __self: this\n          }, React.createElement(Link, {\n            to: \"event/\".concat(event[3]),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 142\n            },\n            __self: this\n          }, event[0])), React.createElement(Card.Text, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 143\n            },\n            __self: this\n          }, event[1])));\n        });\n      }\n\n      var numberOfPages = Math.ceil(this.state.events.length / events_per_page) - 1;\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Filtres\"), React.createElement(Form, {\n        className: \"event_search\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"Categories\"), React.createElement(Form.Control, {\n        as: \"select\",\n        id: \"category\",\n        value: this.state.category,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, cats)), React.createElement(Form.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"City\"), React.createElement(Form.Control, {\n        type: \"text\",\n        id: \"location\",\n        value: this.state.location,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      })), React.createElement(Button, {\n        variant: \"light\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Search\")), current_page - 1 >= 1 && React.createElement(\"p\", {\n        className: \"pag prev round\",\n        id: current_page - 1,\n        onClick: this.pageClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"\\u2039 \"), current_page + 1 <= numberOfPages && React.createElement(\"p\", {\n        className: \"pag next round\",\n        id: current_page + 1,\n        onClick: this.pageClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"\\u203A\"), this.state.scroll && React.createElement(\"button\", {\n        className: \"fleche\",\n        onClick: this.scrollTop,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: flechee,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"demo-content align-center line-drawing-demo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        viewBox: \"0 0 280 100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"g\", {\n        fill: \"none\",\n        \"fill-rule\": \"evenodd\",\n        stroke: \"currentColor\",\n        \"stroke-width\": \"2\",\n        \"stroke-linecap\": \"round\",\n        class: \"lines\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"path\", {\n        class: \"cls-1\",\n        d: \"M48.45,52.42H42V8.58L27.28,52.42H21.16L6.47,8.58V52.42H0V.88H10.23l14,43,14-43H48.45Z\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(\"path\", {\n        class: \"cls-1\",\n        d: \"M101.88.88,81.63,30.59V52.42H74.81V30.59L54.56.88h8.3l15.4,23.73L93.59.88Z\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(\"path\", {\n        class: \"cls-1\",\n        d: \"M142.38,63.74H101.81V60.15h40.57Z\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(\"path\", {\n        class: \"cls-1\",\n        d: \"M186.15,52.42H147.73V.88H185V7H154.55V22.75H183v6.12H154.55V46.3h31.61Z\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(\"path\", {\n        class: \"cls-1\",\n        d: \"M237.52.88l-20,51.54h-7L190.41.88h7.28L214,45.07,230.24.88Z\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(\"path\", {\n        class: \"cls-1\",\n        d: \"M282.2,52.42H243.77V.88H281V7H250.59V22.75H279v6.12H250.59V46.3H282.2Z\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(\"path\", {\n        class: \"cls-1\",\n        d: \"M332.26,52.42h-7l-27-40.68V52.42H291.8V.88h7l27,40.68V.88h6.5Z\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(\"path\", {\n        class: \"cls-1\",\n        d: \"M380.43,7H363.38V52.42h-6.86V7H339.61V.88h40.82Z\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(\"path\", {\n        class: \"cls-1\",\n        d: \"M407.21,53.3q-10.9,0-16.29-4.89a17.06,17.06,0,0,1-5.68-12.55h6.57q.53,5.77,4.8,8.53a18.6,18.6,0,0,0,10.32,2.76,16.25,16.25,0,0,0,9.23-2.36,7.34,7.34,0,0,0,3.5-6.4A6.52,6.52,0,0,0,416,32.2q-3.62-1.93-12.46-3.81t-12.69-5.22A11.19,11.19,0,0,1,387,14.27,12.57,12.57,0,0,1,392,4q5-4,13.31-4,8.72,0,14.06,4t5.66,11.43h-6.64q-1-9.35-12.8-9.35-5.7,0-8.82,2.14a6.6,6.6,0,0,0-3.13,5.7,5.38,5.38,0,0,0,2.51,4.85q2.51,1.62,9.39,3.13a88.56,88.56,0,0,1,10.92,3,17.47,17.47,0,0,1,6.93,4.59,11.8,11.8,0,0,1,2.88,8.35,13.76,13.76,0,0,1-5.29,11Q415.72,53.3,407.21,53.3Z\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      })))), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \"Events \\xE0 venir\"), events));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport { Home as default };","map":{"version":3,"sources":["/home/adrien/Téléchargements/my_events-master/src/pages/Home.js"],"names":["React","Component","Card","Form","Button","Link","axios","flechee","Home","componentDidMount","window","addEventListener","scrollBackTop","pageYOffset","setState","scroll","scrollTop","document","documentElement","pageClick","event","current_page","Number","target","id","getCategories","cats","get","global","api","app_key","then","response","forEach","v","k","push","categories","catch","error","console","log","handleChange","category_id","selectedIndex","value","handleSubmit","events_list","preventDefault","state","location","events","showPosition","position","coords","latitude","longitude","getEvents","anime","targets","strokeDashoffset","setDashoffset","easing","duration","delay","el","i","direction","loop","category","events_per_page","getCity","navigator","geolocation","getCurrentPosition","indexOfLastEvent","indexOfFirstEvent","currentEvents","slice","map","key","length","numberOfPages","Math","ceil"],"mappings":"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","sourcesContent":["import React, {Component} from \"reactn\";\r\nimport Card from 'react-bootstrap/Card';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Button from 'react-bootstrap/Button';\r\nimport {Link} from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport flechee from './flechee.png';\r\nimport './Home.css';\r\n// import anime from \"animejs\";\r\n\r\nexport default class Home extends Component {\r\n\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      events: [],\r\n      categories: [],\r\n      category : \"\",\r\n      category_id: \"\",\r\n      location: \"\",\r\n      current_page: 1,\r\n      events_per_page: 8,\r\n      scroll: false\r\n    }\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    window.addEventListener('scroll', this.scrollBackTop);\r\n}\r\n\r\n\r\n  scrollBackTop = () => {\r\n    if (window.pageYOffset > 0){\r\n      this.setState({scroll: true});\r\n    } else {\r\n      this.setState({scroll: false});\r\n    }\r\n  }\r\n\r\n  componentWillMount(){\r\n    this.getCity();\r\n    this.getCategories();\r\n  }\r\n  \r\n  scrollTop = () => {\r\n    document.documentElement.scrollTop = 0;\r\n  }\r\n  pageClick = (event) => {\r\n    this.setState({\r\n      current_page: Number(event.target.id)\r\n    })  \r\n  }\r\n  getCategories = () => {\r\n    var cats = []\r\n    axios.get(this.global.api + \"categories/?token=\"+this.global.app_key)\r\n    .then((response) => {\r\n      response[\"data\"][\"categories\"].forEach(function(v, k){\r\n        cats.push([v[\"id\"], v[\"name\"]])\r\n      })\r\n      this.setState({categories: cats})\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    })\r\n  }\r\n  handleChange = (event) => {\r\n      if (event.target.id === \"category\"){\r\n        this.setState({\r\n          category_id: event.target[event.target.selectedIndex].id\r\n        })\r\n      }\r\n      this.setState({\r\n        [event.target.id]: event.target.value\r\n      })\r\n  }\r\n  handleSubmit = (event) => {\r\n    var events_list = [];\r\n    event.preventDefault();\r\n    axios.get(this.global.api + \"events/search/?location.address=\"+this.state.location+\"&categories=\"+this.state.category_id+\"&token=\"+this.global.app_key)\r\n    .then((response) => {\r\n      response[\"data\"][\"events\"].forEach(function(v,k){\r\n        if(v[\"logo\"]!==null){\r\n          events_list.push([v[\"name\"][\"text\"],v[\"description\"][\"text\"] ,v[\"logo\"][\"url\"], v[\"id\"]]);\r\n        }\r\n      })\r\n      this.setState({events: events_list});\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    })\r\n  }\r\n\r\n  getCity(){\r\n    navigator.geolocation.getCurrentPosition(this.showPosition);\r\n  }\r\n\r\n  showPosition = (position) => {\r\n    var coords = [position.coords.latitude, position.coords.longitude];\r\n    this.getEvents(coords);\r\n  }\r\n\r\n  getEvents = (coords) => {\r\n    var events_list = []\r\n    axios.get(this.global.api + \"/events/search/?location.latitude=\"+coords[0]+\"&location.longitude=\"+ coords[1]+\"&token=\"+this.global.app_key)\r\n    .then((response) => {\r\n      response[\"data\"][\"events\"].forEach(function(v,k){\r\n        if(v[\"logo\"]!==null){\r\n            events_list.push([v[\"name\"][\"text\"],v[\"description\"][\"text\"] ,v[\"logo\"][\"url\"], v[\"id\"]]);\r\n        }\r\n      })\r\n      this.setState({events: events_list});\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n      \r\n      anime({\r\n        targets: '.line-drawing-demo .lines path',\r\n        strokeDashoffset: [anime.setDashoffset, 0],\r\n        easing: 'easeInOutSine',\r\n        duration: 1800,\r\n        delay: function(el, i) { return i * 350 },\r\n        direction: 'alternate',\r\n        loop: true\r\n        }); \r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {current_page, events_per_page} = this.state;\r\n    const indexOfLastEvent = current_page * events_per_page;\r\n    const indexOfFirstEvent = indexOfLastEvent - events_per_page;\r\n    const currentEvents = this.state.events.slice(indexOfFirstEvent, indexOfLastEvent);\r\n\r\n    var cats = this.state.categories.map(function(cats, key){\r\n      return <option id={cats[0]} key = {key}>{cats[1]}</option>\r\n    })\r\n    if (this.state.events.length > 0){\r\n     var events = currentEvents.map(function(event, key){\r\n        return <Card key={key} border=\"light\">\r\n          <Card.Body>\r\n             <Card.Img variant=\"top\" src={event[2]} />\r\n             <Card.Title><Link to={`event/${event[3]}`}>{event[0]}</Link></Card.Title>\r\n             <Card.Text>{event[1]}</Card.Text>\r\n          </Card.Body>\r\n        </Card>\r\n      })\r\n    }\r\n    var numberOfPages = Math.ceil(this.state.events.length/events_per_page)-1;\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"menu\">\r\n          <h4>Filtres</h4>\r\n          <Form className=\"event_search\" onSubmit={this.handleSubmit}>\r\n            <Form.Group>\r\n              <Form.Label>Categories</Form.Label>\r\n              <Form.Control as=\"select\" id =\"category\" value={this.state.category} onChange={this.handleChange}>\r\n                {cats}\r\n              </Form.Control>\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <Form.Label>City</Form.Label>\r\n              <Form.Control type=\"text\" id =\"location\" value={this.state.location} onChange={this.handleChange}/>\r\n            </Form.Group>\r\n            <Button variant=\"light\" type=\"submit\">Search</Button>\r\n          </Form>\r\n          { current_page -1 >= 1 &&\r\n          <p className=\"pag prev round\" id={current_page - 1} onClick={this.pageClick}>&#8249; </p>\r\n        }\r\n        { current_page +1 <= numberOfPages &&\r\n        <p className=\"pag next round\" id={current_page +1} onClick={this.pageClick}>&#8250;</p>\r\n        }\r\n        { this.state.scroll &&\r\n          <button className = \"fleche\" onClick={this.scrollTop}><img src={flechee}></img></button>  \r\n        }\r\n        </div>\r\n        <div className=\"body\">\r\n        <div className=\"demo-content align-center line-drawing-demo\">\r\n                            <svg viewBox=\"0 0 280 100\" >\r\n                                <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" class=\"lines\">\r\n                                <path class=\"cls-1\" d=\"M48.45,52.42H42V8.58L27.28,52.42H21.16L6.47,8.58V52.42H0V.88H10.23l14,43,14-43H48.45Z\"/><path class=\"cls-1\" d=\"M101.88.88,81.63,30.59V52.42H74.81V30.59L54.56.88h8.3l15.4,23.73L93.59.88Z\"/><path class=\"cls-1\" d=\"M142.38,63.74H101.81V60.15h40.57Z\"/><path class=\"cls-1\" d=\"M186.15,52.42H147.73V.88H185V7H154.55V22.75H183v6.12H154.55V46.3h31.61Z\"/><path class=\"cls-1\" d=\"M237.52.88l-20,51.54h-7L190.41.88h7.28L214,45.07,230.24.88Z\"/><path class=\"cls-1\" d=\"M282.2,52.42H243.77V.88H281V7H250.59V22.75H279v6.12H250.59V46.3H282.2Z\"/><path class=\"cls-1\" d=\"M332.26,52.42h-7l-27-40.68V52.42H291.8V.88h7l27,40.68V.88h6.5Z\"/><path class=\"cls-1\" d=\"M380.43,7H363.38V52.42h-6.86V7H339.61V.88h40.82Z\"/><path class=\"cls-1\" d=\"M407.21,53.3q-10.9,0-16.29-4.89a17.06,17.06,0,0,1-5.68-12.55h6.57q.53,5.77,4.8,8.53a18.6,18.6,0,0,0,10.32,2.76,16.25,16.25,0,0,0,9.23-2.36,7.34,7.34,0,0,0,3.5-6.4A6.52,6.52,0,0,0,416,32.2q-3.62-1.93-12.46-3.81t-12.69-5.22A11.19,11.19,0,0,1,387,14.27,12.57,12.57,0,0,1,392,4q5-4,13.31-4,8.72,0,14.06,4t5.66,11.43h-6.64q-1-9.35-12.8-9.35-5.7,0-8.82,2.14a6.6,6.6,0,0,0-3.13,5.7,5.38,5.38,0,0,0,2.51,4.85q2.51,1.62,9.39,3.13a88.56,88.56,0,0,1,10.92,3,17.47,17.47,0,0,1,6.93,4.59,11.8,11.8,0,0,1,2.88,8.35,13.76,13.76,0,0,1-5.29,11Q415.72,53.3,407.21,53.3Z\"/>\r\n                            </g>\r\n                            </svg>\r\n                    </div> \r\n          <h4>Events à venir</h4>\r\n          {events}\r\n        </div>\r\n      </div>\r\n      \r\n    );\r\n  }\r\n  \r\n                \r\n}"]},"metadata":{},"sourceType":"module"}